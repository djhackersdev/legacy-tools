uBMplay
readme.txt



・概要

BMS プレイヤーと見せかけたビューワです。プレイはできないのでご注意ください。BMS って何？という人は BM98 for the BEGINNER (http://www2.pf-x.net/~bforb/) などを参考にどうぞ。

主な特徴:
・各種編集ソフト (BMSC・GDAC2・BMSE) からの呼び出しが可能
・WAV・BMP の拡張定義 (01 〜 ZZ) に対応
・ストップシーケンス、拡張 BPM 変更、#BGA 命令に対応 (01 〜 ZZ)
・ロングノートに対応 (#LNTYPE 1・#LNTYPE 2 両対応)
・Ogg Vorbis 対応
・シーク機能搭載

製作に際して、以下のソフトウェアを参考にさせていただきました。この場を借りて感謝いたします。
・nBMplay (http://nothing.sh/)
・nazobmplay (同上)



・動作環境

Windows XP SP2 での動作を確認。98SE 以降の Windows なら問題なく動くと思います。また、Visual Basic 6.0 SP6 ランタイム、COMDLG32.OCX、MSCOMCTL.OCX、DirectX ランタイム (7.0 以上) が必須になります。これらのファイルが存在しない場合、正常に実行できませんのでご注意ください。

ダウンロードは以下の URL などから行えます:
http://www.microsoft.com/downloads/details.aspx?displaylang=ja&FamilyID=7B9BA261-7A9C-43E7-9117-F673077FFB3C (VB6 ランタイムのみ)
http://www.vector.co.jp/soft/win95/util/se188840.html (VB6 ランタイムと COMDLG32.OCX を含むいくつかのコンポーネント)
http://www.vector.co.jp/soft/win95/util/se063979.html (同上)
http://www.microsoft.com/japan/windows/directx/ (DirectX ランタイム)

また、Windows Vista で動作させるには、dx7vb.dll、およびその登録が必要になります。http://wiki.nothing.sh/page/nazobmplay に対応方法が掲載されていますが、必ず自己責任の上でお試しください。



・無保証宣言

このソフトウェアは "無保証" です。このソフトウェアを使用したことによるいかなる損害の責任も製作者は負わないものとします。



・再配布について

UCN-Soft (http://ucn.tokonats.net/) で配布しているアーカイブに一切の変更を加えず (内容を変更しない再圧縮はこの限りではありません)、また配布形態が無償の場合に限り、無制限に再配布を許可します。事前の連絡や許可も必要ありません。ただし、それによって生じるコストは再配布を行う人が各自で請け負うこととします。また、著作権は放棄しませんのでご注意ください。

上記の条件を満たせないかたちでの再配布を行いたい場合は、再配布を行う前に必ずメール等で連絡をしてください。



・使い方

まず、uBMplay.exe を起動します。ウィンドウがあらわれたらフォームに BMS・BME・BML・PMS ファイルをドロップしてください。あとは眺めるだけです。また、アイコンに直接ドロップしたりコマンドラインで指定して起動する事も可能です。既に再生中の場合は再生を中断し、指定された BMS を読み込んで再生します。



・対応するフォーマット

音声: RIFF WAV・MP3・Ogg Vorbis
画像: BMP・JPG・PNG (アルファチャンネル非対応)



・コマンドライン引数について

uBMplay は以下のコマンドライン引数に対応しています。BMS 編集ソフトなどから呼び出すと便利です。

-N[0-999]・・・指定した小節から再生開始
-P・・・再生 (GDAC2 用、特に指定しなくてもロード後に自動再生します)
-S・・・停止
-Q・・・終了
-SP・・・再生終了と同時に終了
BMSC での引数指定は BMS Viewer と同じ設定で問題なく動くはずです。なお、上記以外のコマンドは全て無視されます。



・オプションとか

スペースキー・・・0.5 秒間押しつづけると BMS を読み込み直します (ランダムのパターンも変わります)

Up・Down キー・マウスホイール・・・1小節シーク
PageUp・PageDown キー・・・4小節シーク
※押しっぱなしで加速
Home キー・・・0小節にシーク
End キー・・・最後の小節にシーク

1 キー、2 キー・・・ハイスピードの変更 (x0.25 〜 [x1.00] 〜)
3 キー、4 キー・・・リアルハイスピードの変更 (x0.25 〜 [x1.00] 〜)
※押しっぱなしで加速、2つのキーを同時に押すことで x1.00 に近づいていきます
5 キー・・・BGA 表示の切り替え (OFF → ベースのみ → レイヤーのみ → [通常表示] → 常にミス) OFF にすると読み込みも行いません
6 キー・・・エフェクト表示の切り替え (エフェクトなし → 判定 → 判定・爆発 → [判定・爆発・ビーム])
7 キー・・・常に最前面に表示の ON・[OFF]
8 キー・・・スクラッチ位置の切り替え ([左・右] → 右・右 → 左・左 → 右・左)
9 キー・・・各種情報の切り替え (なし → [再生情報] → 曲・オプション情報 → 全て表示)
0 キー・・・ポーズ・[ポーズ解除]
F1 キー・・・サウンド再生の切り替え (BGM → KEY → [KEY&BGM])
※すべてフルキーです。テンキーには対応していません。

さらに ini ファイルを直接編集すると以下のことが:
[Main]
VSYNC=[False],True・・・描画方法の変更 (True にするのは推奨しません)
SingleQuit=[False],True・・・単曲再生モード (True にすると再生が終わった時点で終了します)
[Option]
Volume=n・・・再生音量の変更 (%・増幅はできません)
Transparent=n・・・BGA 透過の閾値の変更 (灰色レベル・[0] (黒のみ透過) 〜 255 (全透過))



・ちょっとした注意

同じ BMS を続けて読み込んだ時にスムーズに再生できるように、同じパスの WAV や BMP は読み込みを行いません。一度 uBMplay で再生した後に WAV や BMP を差し替えた場合は、一度終了してから再生してください。



・作った人

Hayana (program)
web:  http://ucn.tokonats.net/ バグ報告・要望・意見などはこちらへどうぞ。
mail: ucn@tokonats.net

AOiRO_Manbow (skin, icon)



・SPECIAL THANKS!!

開発に関わった全ての人



・Copyright

音声ファイルの変換に SglSound を使用しています。
	Copyright (c) 2006-2007 Maiko Girls

Ogg Vorbis ファイルの展開に libogg、libvorbis および libvorbisfile を使用しています。
	Copyright (c) 2002-2004 Xiph.org Foundation
	Xiph.org http://www.xiph.org/

JPEG ファイルの展開に libjpeg を使用しています。
	copyright (C) 1991-1998, Thomas G. Lane.
	Independent JPEG Group http://www.ijg.org/

PNG ファイルの展開に libpng を使用しています。
	Copyright (c) 1995, 1996 Guy Eric Schalnat, Group 42, Inc.
	Copyright (c) 1996, 1997 Andreas Dilger
	Copyright (c) 1998-2002, 2004, 2006-2007 Glenn Randers-Pehrson. 
	libpng Home Page http://www.libpng.org/pub/png/libpng.html

PNG ファイルの展開に zlib を使用しています。
	(C) 1995-2004 Jean-loup Gailly and Mark Adler
	zlib Home Site http://www.zlib.net/



・更新履歴

2008年1月3日 1.4.6
・ロングノートが処理されないバグを修正
・情報表示切替を多段階に変更
・シーク後に一部の音が鳴らなくなるバグを修正
・その他修正

2007年8月9日 1.4.5
・BGA 透過はデフォルトでは黒のみでしか行わないように変更
・ini の Option セクションに Transparent キーを追加
・リニア PCM でない RIFF WAV ファイルの再生に対応 (ただし ACM で変換できるものに限る)
・Ogg 関連のライブラリをダイナミックリンクに変更
・その他修正

2007年5月27日 1.4.4
・再生開始位置指定が動いていなかったバグを修正

2007年5月21日 1.4.3
・コマンドライン引数に『-SP (単曲再生)』を追加
・#LNOBJ と同時にチャンネル 5x 〜 6x を使用すると強制終了するバグを修正
・その他修正

2007年4月16日 1.4.2
・レイヤーのみ表示時に背景に白を塗っていたミスを修正
・一部の JPEG 画像を読み込むと強制終了するバグを修正

2007年4月7日 1.4.1
・フリースクラッチが7鍵盤に割り当てられていたバグを修正
・同じ WAV が連続して鳴らないバグを修正
・BGA 表示切り替えの多様化
・途中から再生した時に再生がズレるバグを修正
・ロングノートの挙動がおかしくなるバグを修正
・画面と音が激しくズレるバグを修正
・シーク機能 (小節単位) を追加
・途中から再生した時に鳴っているはずの音を鳴らすように変更
・その他修正

2007年4月1日 1.4.0
・Ogg Vorbis 形式に対応
・ウィンドウをダブルクリックでファイルを開く機能を追加
・読み込み速度の改善その1
・ini の Option セクションに Volume キーを追加
・HS 変更・RHS 変更ボタンに押しっぱなしで加速する機能を追加
・再生時間表示の追加
・読み込み速度の改善その2
・PhasePerMeasure を再び削除
・ミス画像に対応
・再生精度の向上
・最後に再生したファイルのパスを保存するように変更
・エフェクトの強化
・判定 ON・OFF と爆発 ON・OFF を統合し、エフェクトに変更
・RHS の上限を自動算出するように変更
・小節数・タイトルの表示場所を変更
・全体的なコードの修正
・PNG 形式に対応 (アルファチャンネルには対応しません)
・アイコン、メタファイル、拡張メタファイル、GIF ファイルへの対応を削除
・タイトルバーにファイルのパスを表示するように変更
・Windows Vista での起動時に画面が一瞬ブラックアウトする仕様を修正
・パレットを使用した BMP・PNG の場合、RGB(16,16,16) 未満の色は透過するように変更
・ランダム命令の多重ネストを解釈しないように変更
・ヘッダ部分もランダム命令の影響を受けるように変更
・ランダム命令の最大値パターンが絶対に出現しないバグを修正
・時間軸判定に変更
・その他修正

2006年8月21日 1.3.13
・#GENLE でもジャンル指定と判定するように変更
・途中から再生時、開始位置より前に BPM 変更があった場合はそれを反映するように変更
・途中から再生時、開始位置にまたがるロングノートを表示するように変更

2006年6月18日 1.3.12
・#RONDAM でもランダム命令と判定するように変更
・MP3 のチャンネル数の判定を間違っていたのを修正

2005年12月25日 1.3.11
・WAV・BMP の読み込みを少々変更
・その他修正

2005年8月07日 1.3.10
・先頭 200 バイト以内にデータがなかった時に読み込みを中断する仕様を削除

2005年2月14日 1.3.9
・#LNOBJ の実装にバグがあったのを修正

2005年2月11日 1.3.8
・ランダム命令を使った BMS が正しく再生できないことがあったバグを修正
・#LNOBJ に対応
・その他修正

2005年1月17日 1.3.7
・フォントサイズが 96dpi 以外の時にウィンドウサイズが正常でなかったバグを修正
・せっかくなのでこっちも UPX 圧縮してみる

2004年9月22日 1.3.6
・KEY ONLY の時に一部の WAV が再生されないバグを修正

2004年9月12日 1.3.5
・連続して再生した時に #PATH_WAV を使っていると強制終了するバグを修正

2004年9月04日 1.3.4
・#BGA 命令に関して色々と間違っていたのを修正

2004年9月01日 1.3.3
・BGM ON・OFF をサウンド再生の切り替え (KEY&BGM → KEY ONLY → BGM ONLY) に変更
・サウンド再生の切り替えのキーを F1 に変更
・サウンド再生の設定を ini から読み込まないように変更 (起動時は常に KEY&BGM に)
・エフェクト ON・OFF を爆発 ON・OFF に変更
・判定・コンボ表示 ON・OFF を F2 キーに設定
・その他修正

2004年8月17日 1.3.2
・タイトルバーのスクロール速度を変更

2004年8月10日 1.3.1
・JPEG 読み込みに対応
・ID3v1 と ID3v2 の両方のタグを持つ MP3 が読み込めなかったかもしれないバグを修正
・ID3v2 のフッタの事をすっかり忘れていたので対応
・B キーに BGM 再生の ON・OFF 機能を追加
・判定・コンボ表示を追加 (おまけ機能・判定はかなり適当)
・6 キーの爆発 ON・OFF をエフェクト ON・OFF に変更
・その他修正

2004年6月20日 1.3.0
・MP3 読み込みに対応 (ID3v1・ID3v2・RIFF MP3・タグなし MP3)
・8 キーでスクラッチ位置を切り替える機能を追加
・スペースキーで BMS の再読み込みをする機能を追加
・拡張 BGA 命令がバグっていたのを修正
・その他修正

2004年6月13日 1.2.7
・引き続き変数関連の修正
・「code : Desert」など「:」を含む #TITLE・#GENRE・#ARTIST を取得できなかったバグを修正
・なぜか PhasePerMeasure が復活
・ini の一部がちょっとおかしくなっていたのを修正
・その他修正

2004年6月10日 1.2.6
・変数名とか変数型とか見直し
・その他修正
・※かなり大規模な変数名変更のためにバグ発生の恐れあり
・※同時にランダムにもバグ発生の恐れあり (特にネスト時)

2004年6月07日 1.2.5
・オーバーフローで強制終了するバグを修正
・起動時の座標が画面サイズを越えていた時に X=0, Y=0 で起動するように修正

2004年6月06日 1.2.4
・キー配置をちょっと変更
・情報表示をちょっと変更
・ポーズ時の画面表示をちょっと変更
・BMS 再生中にタイトルバーでアニメーションもどき
・ポーズずれ対策
・その他修正

2004年5月30日 1.2.3
・存在しない WAV を読み込もうとした時、容量 0 バイトのファイルを作成していたバグを修正
・その他修正

2004年5月23日 1.2.2
・ninth -forbidden story- がある程度再生できるかも？
・VSYNC 使用時になるべく Sleep するように (やっぱり 2000・XP 限定・・・)
・タイマー使用時に VBLANK を待たないように戻した
・RealHiSpeed の実装 (保存はしません)
・HS・RHS 変更キーを押しっぱなしにしても値が変更できるように
・HS・RHS 変更キー2つを同時押しで x1 に戻るように
・爆発エフェクトを1ライン1つに戻した
・BMS 読み込み中にタイトルバーにアニメーションもどき追加
・#BGA 命令に対応 (Materials 機能には対応していません)
・Alt キー、アイコン上の左クリックを無視するように (ちょっと不安なので何か不具合あったらご報告お願いします)
・最小化時に描画を省略するように
・ポーズが無効になっていたのを修正
・その他修正

2004年5月04日 1.2.1
・ヘッダファイルが異様に大きい WAV に対応 (6yen さんのBMSの一部の WAV とか)
・先頭 200 Byte 以内にヘッダがなければ無効だと判断するようにしたけど・・・問題ないよね？
・タイマー使用時1秒に1回 VSYNC 待つようにしてみたけど無意味かも (ティアリング対策)

2004年5月04日 1.2.0
・2P 側スクラッチの爆発が変な位置になっていたのを修正
・オブジェ位置の変数を Long 型から Single 型へ変更 (オブジェの動きが滑らかに)
・BMS 再生処理を大幅に変更 (nazo の新分解能に近い形になった？)
・PhasePerMeasure の削除 (いらなくなったので)
・タイマーの管理方法を変更
・タイマー使用時に FPS を画面のリフレッシュレートと同じにするように (2000・XP のみ)

2004年4月25日 1.1.5
・PLAYLEVEL を数字で表示するように変更
・何故か改行コードを読み込んだとき無視するように修正 (そふぁだら対策)
・爆発グラフィックの管理方法を変更 (1ラインに複数個表示できるように)
・爆発グラフィックの中・小を削除 (ON・OFFのみに変更)
・その他修正

2004年4月09日 1.1.4
・ストップシーケンスの動作がおかしかったのを修正
・引数に -N を指定した時の挙動を変更
・ロングノートの挙動を修正
・その他修正

2004年4月09日 1.1.3
・開発環境を VisualBasic6 SP5 から SP6 に変更
・GDAC2 から送られた時でも再生できるように仕様変更
・PMS ファイルに対応 (スキンの変更などは行いません)
・その他修正

2004年4月08日 1.1.2
・コマンドラインの修正・拡張
・その他修正

2004年4月04日 1.1.1
・ランダム多重ネストに対応？
	＃テストできる BMS が少なすぎてよくわからない
	＃あくまでオマケ機能という事で
・その他修正

2004年4月01日 1.1.0
・BPM 変更にバグがあったので修正
・ubm.ini に PhasePerMeasure 追加
・その他修正

2004年4月01日 1.00
・修正たくさん
・機能追加たくさん
・正式公開バージョン

2004年3月31日 Build 44
・挙動に関する修正
・単曲終了モード追加

2004年3月31日 Build 42
・ini の記述に不適切な部分があったのを修正

2004年3月31日 Build 41
・サブクラス化
・その他修正

2004年3月31日 Build 26
・マイナス BPM に対応 (しかし、無理やり対応させた感が強く個人的には納得がいかない)
・アイコンを変更

2004年3月30日 Build 24
・WAV・BMP が存在しない時にエラーが出るのを修正

2004年3月30日 Build 23
・Debug.Print 文消し忘れ(ぉ

2004年3月30日 Build 22
・バグ修正

2004年3月29日 Build 5
・無音オブジェとかに関する修正

2004年3月29日 Build 4
・ロングノート実装とか

2004年3月28日 Build 3
・色々と変更しすぎて記述不可

2004年3月28日 Build 1
・とりあえずコンパイルしてみる。